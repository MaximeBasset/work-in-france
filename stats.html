<!DOCTYPE HTML>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="static/favicon.ico">
    <title>Work in France - Statistiques</title>
    <link rel="stylesheet" href="static/css/bundle.css?bust=69916315714" type="text/css">
    

<style>
/* Hack to display 0 values along x-axis in red. */
.dossiers-by-day svg > g > g.dataset-units > circle[cy='180'] {
    fill: #d1335b !important;
}
</style>

</head>
<body>

    <nav aria-label="page" id="skip-links">
        <a href="#skip-to-main">Contenu principal</a>
        <a href="#skip-to-footer">Pied de page</a>
    </nav>

    <header class="site-header">
        <nav>
            <div class="site-header-logos">
                <img src="static/img/gouv.svg" alt="" width="80">
                <a class="site-logo" href="index.html">Work in France</a>
            </div>
            <ul>
                <li>
                    <a href="validity_check.html">Vérifier une autorisation</a>
                </li>
                <li>
                    <a href="mailto:contact@workinfrance.beta.gouv.fr">Contact</a>
                </li>
            </ul>
        </nav>
    </header>

    

    <main id="skip-to-main">

        <section class="section-white stats-loading">
            <div class="center">
                <div class="spinner">Chargement...</div>
            </div>
        </section>

        <div class="stats-container">

            <section class="section-white">
                <h3>Statistiques</h3>
                <ul>
                    <li>Nombre de dossiers déposés : <b class="total-dossiers"></b></li>
                    <li>Nombre de dossiers acceptés : <b class="total-dossiers-closed"></b></li>
                    <li>Temps de traitement moyen : <b class="time-to-process"></b></li>
                </ul>
            </section>

            <section class="section-color">
                <h4>
                    Évolution du nombre de dossiers déposés par jour
                    <small>pendant les 31 derniers jours</small>
                </h4>
                <div class="dossiers-by-day"></div>
            </section>

            <section class="section-white">
                <h4>
                    Évolution du nombre de dossiers déposés par mois
                    <small>pendant les 365 derniers jours</small>
                </h4>
                <div class="dossiers-by-month"></div>
            </section>

            <section class="section-color">
                <h4>Évolution du temps de traitement moyen par mois</h4>
                <div class="time-to-process-by-month"></div>
            </section>

            <section class="section-white">
                <h4>Répartition des dossiers par statut</h4>
                <div class="dossiers-by-status"></div>
            </section>

            <section class="section-color">
                <h4>Répartition des dossiers par pays</h4>
                <div class="dossiers-by-country"></div>
            </section>

            <section class="section-white">
                <p><small>Dernière mise à jour des données : <b class="last-update"></b></small></p>
            </section>

        </div>

    </main>



    <footer id="skip-to-footer" class="site-footer">
        <div class="site-footer-content">
            <ul>
                <li>
                    <img src="static/img/gouv.svg" alt="" width="100">
                </li>
                <li>
                    <a href="faq.html">FAQ</a>
                </li>
                <li>
                    <a href="cgu.html">Mentions légales</a>
                </li>
                <li>
                    <a href="stats.html">Statistiques</a>
                </li>
            </ul>
            <p>
                <small><i><b>Rappel : <a href="https://www.legifrance.gouv.fr/affichCodeArticle.do?idArticle=LEGIARTI000006904868&amp;cidTexte=LEGITEXT000006072050" target="_blank">Article L.8256-1</a> du code du travail :</b> le fait de se rendre coupable de fraude ou fausse déclaration pour obtenir, faire obtenir ou tenter de faire obtenir à un étranger le titre mentionné à <a href="https://www.legifrance.gouv.fr/affichCodeArticle.do?cidTexte=LEGITEXT000006072050&idArticle=LEGIARTI000006904851&dateTexte=&categorieLien=cid" target="_blank">l'article L.8251­-1</a> est puni d'un emprisonnement d'un an et d'une amende de 3000 €.</i></small>
            </p>
        </div>
    </footer>

    

        
        <script>
            var _paq = _paq || [];
            _paq.push(["setDomains", ["*.work-in-france.beta.gouv.fr", "*.workinfrance.beta.gouv.fr"]]);
            _paq.push(['trackPageView']);
            _paq.push(['enableLinkTracking']);
            (function() {
                var u="//stats.data.gouv.fr/";
                _paq.push(['setTrackerUrl', u+'piwik.php']);
                _paq.push(['setSiteId', '46']);
                var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
                g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
            })();
        </script>
        <noscript><img src="//stats.data.gouv.fr/piwik.php?idsite=46" style="border: 0;" alt=""></noscript>
    
<script src="static/js/frappe-charts.1.1.0.js"></script>
<script>

    let jsonUrl = 'https://wif-bo-public.num.social.gouv.fr/static/stats.json';
    if (window.location.hostname === 'localhost') {
      console.log('Running in dev mode on localhost')
      jsonUrl = 'http://localhost:1337/static/stats.json';
    }

    let loaderElem = document.querySelector('.stats-loading');
    let statsElem = document.querySelector('.stats-container');
    statsElem.style.display = 'none';

    let xhr = new XMLHttpRequest();
    xhr.responseType = 'json';
    xhr.onreadystatechange = function () {
      if (this.readyState === XMLHttpRequest.DONE) {
        if (this.status === 200) {
          showStatsCallback(this.response);
        } else {
          console.log('Unable to load stats.json from', jsonUrl);
        }
      }
    };
    xhr.open('GET', jsonUrl, true);
    xhr.send(null);

    let showStatsCallback = function (json) {

        loaderElem.style.display = 'none';
        statsElem.style.display = 'block';

        document.querySelector('.total-dossiers').innerHTML = json.data.total_dossiers;
        document.querySelector('.total-dossiers-closed').innerHTML = json.data.total_dossiers_closed;
        document.querySelector('.time-to-process').innerHTML = json.data.time_to_process;

        let lastUpdate = new Date(json.data.last_update)
        let options = {
            'hour': '2-digit',
            'day':'2-digit',
            'month':'2-digit',
            'year':'numeric',
            'minute':'2-digit',
        };
        lastUpdate = new Intl.DateTimeFormat('fr-FR', options).format(lastUpdate);
        document.querySelector('.last-update').innerHTML = lastUpdate;

        new frappe.Chart('.dossiers-by-day', {
            data: json.data_num_dossiers_day,
            type: 'line',
            height: 250,
            colors: ['#006cb0'],
        });
        new frappe.Chart('.dossiers-by-month', {
            data: json.data_num_dossiers_month,
            type: 'line',
            height: 250,
            colors: ['#006cb0'],
        });
        new frappe.Chart('.dossiers-by-status', {
            data: json.data_num_by_status,
            type: 'bar',
            height: 250,
            colors: ['#006cb0'],
        });
        new frappe.Chart('.dossiers-by-country', {
            data: json.data_num_by_contry,
            type: 'bar',
            height: 250,
            colors: ['#006cb0'],
        });
        new frappe.Chart('.time-to-process-by-month', {
            data: json.data_time_to_process_by_month,
            type: 'bar',
            height: 250,
            colors: ['#006cb0'],
        });
    };

</script>


</body>
</html>